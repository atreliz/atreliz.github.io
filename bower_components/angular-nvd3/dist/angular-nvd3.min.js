!function(){"use strict";angular.module("nvd3",[]).directive("nvd3",[function(){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?"},link:function(scope,element){function configure(chart,options,chartType){chart&&options&&angular.forEach(chart,function(value,key){"dispatch"===key?((void 0===options[key]||null===options[key])&&scope._config.extended&&(options[key]={}),configureEvents(value,options[key])):"xScale"===key&&"scatterChart"===chartType||"yScale"===key&&"scatterChart"===chartType||"values"===key&&"pieChart"===chartType||["scatter","defined","options","axis","rangeBand","rangeBands"].indexOf(key)<0&&(void 0===options[key]||null===options[key]?scope._config.extended&&(options[key]=value()):chart[key](options[key]))})}function configureEvents(dispatch,options){dispatch&&options&&angular.forEach(dispatch,function(value,key){void 0===options[key]||null===options[key]?scope._config.extended&&(options[key]=value.on):dispatch.on(key+"._",options[key])})}function configureWrapper(name){if(void 0===scope.options[name]||null===scope.options[name]){if(!scope._config.extended)return;scope.options[name]={}}angular.forEach(defaultWrapper(name),function(value,key){(void 0===scope.options[name][key]||null===scope.options[name][key])&&scope._config.extended&&(scope.options[name][key]=value)});var wrapElement=angular.element("<div></div>").addClass(name).addClass(scope.options[name].class).removeAttr("style").css(scope.options[name].css).text(scope.options[name].text);scope.options[name].enable&&("title"===name?element.prepend(wrapElement):"subtitle"===name?element.find(".title").after(wrapElement):"caption"===name&&element.append(wrapElement))}function configureStyles(){if(void 0===scope.options.styles||null===scope.options.styles){if(!scope._config.extended)return;scope.options.styles={}}angular.forEach(defaultStyles(),function(value,key){(void 0===scope.options.styles[key]||null===scope.options.styles[key])&&scope._config.extended&&(scope.options.styles[key]=value)}),angular.forEach(scope.options.styles.classes,function(value,key){value?element.addClass(key):element.removeClass(key)}),element.removeAttr("style").css(scope.options.styles.css)}function defaultWrapper(_){switch(_){case"title":return{enable:!1,text:"Write Your Title","class":"h4",css:{width:scope.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:scope.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:scope.options.chart.width+"px",textAlign:"center"}}}}function defaultStyles(){return{classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}}}var chart,defaultConfig={extended:!1,visible:!0,disabled:!1,autorefresh:!0};scope._config=angular.extend(defaultConfig,scope.config),scope.api={refresh:function(){scope.api.updateWithOptions(scope.options)},updateWithOptions:function(options){scope.api.clearElement(),angular.isDefined(options)!==!1&&scope._config.visible&&(chart=nv.models[options.chart.type](),angular.forEach(chart,function(value,key){"options"===key||("dispatch"===key?((void 0===options.chart[key]||null===options.chart[key])&&scope._config.extended&&(options.chart[key]={}),configureEvents(chart[key],options.chart[key])):["lines","lines1","lines2","bars","bars1","bars2","stack1","stack2","multibar","discretebar","pie","scatter","bullet","sparkline","legend","distX","distY","xAxis","x2Axis","yAxis","yAxis1","yAxis2","y1Axis","y2Axis","y3Axis","y4Axis","interactiveLayer","controls"].indexOf(key)>=0?((void 0===options.chart[key]||null===options.chart[key])&&scope._config.extended&&(options.chart[key]={}),configure(chart[key],options.chart[key],options.chart.type)):"clipEdge"===key&&"multiBarHorizontalChart"===options.chart.type||"clipVoronoi"===key&&"historicalBarChart"===options.chart.type||"color"===key&&"indentedTreeChart"===options.chart.type||"defined"===key&&("historicalBarChart"===options.chart.type||"cumulativeLineChart"===options.chart.type||"lineWithFisheyeChart"===options.chart.type)||"forceX"===key&&("multiBarChart"===options.chart.type||"discreteBarChart"===options.chart.type||"multiBarHorizontalChart"===options.chart.type)||"interpolate"===key&&"historicalBarChart"===options.chart.type||"isArea"===key&&"historicalBarChart"===options.chart.type||"size"===key&&"historicalBarChart"===options.chart.type||"stacked"===key&&"stackedAreaChart"===options.chart.type||"values"===key&&"pieChart"===options.chart.type||"xScale"===key&&"scatterChart"===options.chart.type||"yScale"===key&&"scatterChart"===options.chart.type||"x"===key&&("lineWithFocusChart"===options.chart.type||"multiChart"===options.chart.type)||"y"===key&&"lineWithFocusChart"===options.chart.type||"multiChart"===options.chart.type||(void 0===options.chart[key]||null===options.chart[key]?scope._config.extended&&(options.chart[key]=value()):chart[key](options.chart[key])))}),scope.api.updateWithData(scope.data),configureWrapper("title"),configureWrapper("subtitle"),configureWrapper("caption"),configureStyles(),nv.addGraph(function(){return nv.utils.windowResize(function(){chart.update()}),chart},options.chart.callback))},updateWithData:function(data){data&&(scope.options.chart.transitionDuration=+scope.options.chart.transitionDuration||250,d3.select(element[0]).select("svg").remove(),d3.select(element[0]).append("svg").attr("height",scope.options.chart.height).attr("width",scope.options.chart.width).datum(data).transition().duration(scope.options.chart.transitionDuration).call(chart))},clearElement:function(){element.find(".title").remove(),element.find(".subtitle").remove(),element.find(".caption").remove(),element.empty(),chart=null}},scope.$watch("options",function(){!scope._config.disabled&&scope._config.autorefresh&&scope.api.refresh()},!0),scope.$watch("data",function(){!scope._config.disabled&&scope._config.autorefresh&&scope.api.refresh()},!0),scope.$watch("config",function(config){scope._config=angular.extend(defaultConfig,config),scope.api.refresh()},!0),angular.forEach(scope.events,function(eventHandler,event){scope.$on(event,function(e){return eventHandler(e,scope)})})}}}])}();